# Disclaimer

В задании, на мой взгляд, либо противоречие, либо недосказанность:

> 3. Подготовьте скрипты для создания пользователей. Рекомендуем создать не менее двух пользователей.
> 4. Подготовьте скрипты, чтобы создать роли. Они должны соответствовать ролям из вашей таблицы.

Пользователей требуется минимум два (как я понимаю, просто для практики и тренировки), а в таблице записей очевидно больше.

Отсюда для экономии времени ниже приведу создание именно двух пользователей (service accounts) и настройку двух rolebindings.

А для того, чтобы созданная таблица как-то соответствовала практике, в файле role.yaml приведены манифесты всех ролей из таблицы.


Также получилось чуть больше файлов, чем указано в задании (опять-таки скорее всего недосказанность в условии):

 * secret-admin.yaml - создание токена для специалиста по ИТ-безопасности
 * secret-java-developer.yaml - создание токена для java-разработчика (конкретизировал для демонстрации принципа наименьших привилегий - пусть для точности это будет некий джавист со своими правами; будем предполагать, что у разрабов на других стеках свои неймспейсы)


# Сначала создаем пространства имен

```console
kubectl create ns secure-space
```

```console
kubectl create ns development
```

# Создание пользователей (serviceaccounts) и генерация им токенов

```console
kubectl create sa security.admin -n secure-space
```

```console
kubectl -n secure-space apply -f secret-admin.yaml
```

```console
kubectl create sa java-developer -n development
```

```console
kubectl -n development apply -f secret-java-developer.yaml
```

# Применение манифесты ролей

```console
kubectl apply -f role.yaml
```

# Применение привязок ролей к юзерам

```console
kubectl apply -f rolebinding.yaml
```